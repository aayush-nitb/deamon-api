"use strict";
var express = require('express');
var bodyParser = require('body-parser');
var Commons_Config_1 = require('./commons/Commons_Config');
var Api_Module_1 = require('./api/Api_Module');
var app = express();
var api = new Api_Module_1.Api_Module(app);
var mongoose = require('mongoose');
mongoose.connect(Commons_Config_1.Commons_Config.current.mongoConnectionString);
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));
if (Commons_Config_1.Commons_Config.env == 'development')
    api.allowCors();
api.handleError();
var server = app.listen(Commons_Config_1.Commons_Config.current.port, function () {
    console.log('Server listening on port' + Commons_Config_1.Commons_Config.current.port);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQVksT0FBTyxXQUFNLFNBQ3pCLENBQUMsQ0FEaUM7QUFDbEMsSUFBWSxVQUFVLFdBQU0sYUFFNUIsQ0FBQyxDQUZ3QztBQUV6QywrQkFBK0IsMEJBQy9CLENBQUMsQ0FEd0Q7QUFDekQsMkJBQTJCLGtCQUUzQixDQUFDLENBRjRDO0FBRTdDLElBQUksR0FBRyxHQUF3QixPQUFPLEVBQUUsQ0FBQztBQUN6QyxJQUFJLEdBQUcsR0FBZSxJQUFJLHVCQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7QUFFMUMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsQ0FBQyxPQUFPLENBQUMsK0JBQWMsQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUUvRCxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkQsRUFBRSxDQUFDLENBQUMsK0JBQWMsQ0FBQyxHQUFHLElBQUksYUFBYSxDQUFDO0lBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3pELEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUVsQixJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLCtCQUFjLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTtJQUNqRCxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixHQUFHLCtCQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzFFLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBleHByZXNzIGZyb20gJ2V4cHJlc3MnXHJcbmltcG9ydCAqIGFzIGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInXHJcblxyXG5pbXBvcnQgeyBDb21tb25zX0NvbmZpZyB9IGZyb20gJy4vY29tbW9ucy9Db21tb25zX0NvbmZpZydcclxuaW1wb3J0IHsgQXBpX01vZHVsZSB9IGZyb20gJy4vYXBpL0FwaV9Nb2R1bGUnXHJcblxyXG5sZXQgYXBwOiBleHByZXNzLkFwcGxpY2F0aW9uID0gZXhwcmVzcygpO1xyXG5sZXQgYXBpOiBBcGlfTW9kdWxlID0gbmV3IEFwaV9Nb2R1bGUoYXBwKTtcclxuXHJcbmxldCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XHJcbm1vbmdvb3NlLmNvbm5lY3QoQ29tbW9uc19Db25maWcuY3VycmVudC5tb25nb0Nvbm5lY3Rpb25TdHJpbmcpO1xyXG5cclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xyXG5pZiAoQ29tbW9uc19Db25maWcuZW52ID09ICdkZXZlbG9wbWVudCcpIGFwaS5hbGxvd0NvcnMoKTtcclxuYXBpLmhhbmRsZUVycm9yKCk7XHJcblxyXG5sZXQgc2VydmVyID0gYXBwLmxpc3RlbihDb21tb25zX0NvbmZpZy5jdXJyZW50LnBvcnQsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdTZXJ2ZXIgbGlzdGVuaW5nIG9uIHBvcnQnICsgQ29tbW9uc19Db25maWcuY3VycmVudC5wb3J0KTtcclxufSk7Il19
